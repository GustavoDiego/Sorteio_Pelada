import{a as R,b as j,c as G,d as O}from"./chunk-AGFM7SM6.js";import{A as k,f as S,g as P,i as _,j as g,l as x,m as M,p as C,r as w,s as T,w as N,y as F,z as D}from"./chunk-7HVIFHBR.js";import"./chunk-F2X3VGZZ.js";import{Aa as E,Da as L,f as b,ha as p,i as y,wa as I,ya as B}from"./chunk-GNGLMIXC.js";import{Ca as n,Db as h,Ka as f,Qa as v,Xa as a,db as t,eb as i,fb as m,lb as d,wb as l,xa as o}from"./chunk-ZTHY6GRW.js";function U(s,u){s&1&&(t(0,"div",8),m(1,"p-progressSpinner",9),i())}var A=class s{constructor(u,r,e,c){this.fb=u;this.authService=r;this.router=e;this.message=c;this.form=this.fb.group({username:this.fb.nonNullable.control("",g.required),password:this.fb.nonNullable.control("",g.required)})}loading=!1;form;navigateToRegister(){this.router.navigateByUrl("/register")}login(){this.form.invalid||(this.loading=!0,this.authService.login(this.form.getRawValue()).subscribe({next:()=>{this.message.add({severity:"success",summary:"Login realizado",detail:"Bem-vindo!",life:2e3}),setTimeout(()=>{this.router.navigateByUrl("/home")},2e3)},error:()=>{this.message.add({severity:"error",summary:"Falha no login",detail:"Usu\xE1rio ou senha inv\xE1lidos",life:3e3}),this.loading=!1},complete:()=>{this.loading=!1}}))}static \u0275fac=function(r){return new(r||s)(n(N),n(L),n(E),n(p))};static \u0275cmp=f({type:s,selectors:[["app-login"]],features:[h([p])],decls:12,vars:4,consts:[[1,"login-wrapper"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"title"],["type","text","pInputText","","formControlName","username","placeholder","Usu\xE1rio"],["type","password","pPassword","","formControlName","password","placeholder","Senha",3,"feedback"],["pButton","","type","submit",3,"disabled"],["pButton","","type","button",1,"p-button-text","register-button",3,"click"],["class","loading",4,"ngIf"],[1,"loading"],["strokeWidth","6","animationDuration","0.5s","styleClass","spinner"]],template:function(r,e){r&1&&(m(0,"p-toast"),t(1,"div",0)(2,"form",1),d("ngSubmit",function(){return e.login()}),t(3,"h2",2),l(4,"Entrar"),i(),m(5,"input",3)(6,"input",4),t(7,"button",5),l(8,"Entrar"),i(),t(9,"button",6),d("click",function(){return e.navigateToRegister()}),l(10," Registrar-se "),i(),v(11,U,2,0,"div",7),i()()),r&2&&(o(2),a("formGroup",e.form),o(4),a("feedback",!1),o(),a("disabled",e.loading),o(4),a("ngIf",e.loading))},dependencies:[y,b,F,C,_,x,M,w,T,k,D,j,R,B,I,P,S,O,G],styles:[".login-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:#121212;padding:1rem}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;background:#1c1c1e;padding:2rem;border-radius:12px;width:100%;max-width:400px;color:#fff}.title[_ngcontent-%COMP%]{text-align:center;margin-bottom:1rem;color:#e74c3c;font-weight:700}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1rem}.spinner[_ngcontent-%COMP%]{width:50px;height:50px}"]})};export{A as LoginPage};
